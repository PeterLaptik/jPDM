<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:p="http://primefaces.org/ui"
    xmlns:f="http://xmlns.jcp.org/jsf/core">
<h:head>
    <title>jPDM admin page</title>
    <h:outputStylesheet library="css" name="admin.css" />
    <!-- 
	<h:outputStylesheet name="primeicons/primeicons.css" library="primefaces" />
	<h:outputStylesheet library="primefaces-omega" name="theme.css" />  
	-->
</h:head>
<h:body>
    <div id="mainContainer">
        <div class="mainMenu">
            <!-- Main menu -->
            <p:menu>
                <p:menuitem value="Statistics" action="/test"
                    update="messages" ajax="false"
                    icon="pi pi-external-link" />
                <p:menuitem value="Users" action="/test"
                    update="messages" ajax="false"
                    icon="pi pi-external-link" />
                <p:menuitem value="Groups" action="/test"
                    update="messages" ajax="false"
                    icon="pi pi-external-link" />
                <p:menuitem value="Companies" action="/test"
                    update="messages" ajax="false"
                    icon="pi pi-external-link" />
            </p:menu>
        </div>

        <div class="departmentsTable">
            <h3>Departments</h3>
            <h:form id="dep-form">
                <p:dataTable var="department" id="id-departments-list"
                    value="#{userManager.getDepartmentsList()}" selectionMode="single"
                    selection="#{userManager.selectedDepartment}"
                    rowKey="#{department.id}">
                    <p:column headerText="Name">
                        <h:outputText value="#{department.name}" />
                    </p:column>
                    <p:column headerText="Description">
                        <h:outputText value="#{department.description}" />
                    </p:column> 
                    <p:ajax event="rowSelect" update="user-form:id-user-list" />
                </p:dataTable>


                <p:contextMenu for="id-departments-list"
                    widgetVar="cMenu">
                    <p:menuitem value="Create new" icon="pi pi-search" />
                    <p:menuitem value="Delete" icon="pi pi-search" />
                </p:contextMenu>
            </h:form>
        </div>
        <div class="usersTable">
        <h3>Users</h3>
        <h:form id="user-form">
        <p:dataTable var="user" id="id-user-list"
                    value="#{userManager.getUserList()}" selectionMode="single"
                    selection="#{userManager.selectedUser}"
                    rowKey="#{user.id}" scrollable="true"
                    scrollHeight="70vh">
                    <p:column headerText="Login">
                        <h:outputText value="#{user.login}" />
                    </p:column>
                    <p:column headerText="Name">
                        <h:outputText value="#{user.name}" />
                    </p:column>
                </p:dataTable>
          </h:form>
        </div>
    </div>
</h:body>
</html>