<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

<h:head>
	<title>jPDM admin page - model</title>
	<h:outputStylesheet library="css" name="admin.css" />
	<h:outputStylesheet name="primeicons/primeicons.css"
		library="primefaces" />
	<h:outputStylesheet library="css" name="primeflex.css" />
	<h:outputStylesheet library="css" name="saga-blue.css" />
</h:head>

<h:body>
	<ui:include src="header.xhtml" />
	<div id="mainContainer">
		<!-- Left menu bar -->
		<div class="mainMenu">
			<!-- Main menu -->
			<p:menu>
				<p:menuitem value="Statistics" action="/test" update="messages"
					ajax="false" icon="pi pi-chart-bar" />
				<p:menuitem value="Users" outcome="users.xhtml" update="messages"
					ajax="false" icon="pi pi-user" />
				<p:menuitem value="Groups" outcome="groups.xhtml" update="messages"
					ajax="false" icon="pi pi-users" />
				<p:menuitem value="Model" outcome="model.xhtml" update="messages"
					ajax="false" style="background-color: rgb(0 0 0 / 10%);"
					icon="pi pi-database" />
			</p:menu>
		</div>

		<!-- Types table -->
		<div class="type-hierarchy">
			<h:form id="types-form">
				<p:toolbar>
					<p:toolbarGroup>
						<h3>Types</h3>
					</p:toolbarGroup>
					<p:toolbarGroup align="right">
						<p:commandButton value="Create" icon="pi pi-plus"
							style="margin-right: .5rem" styleClass="ui-button-success">
						</p:commandButton>
					</p:toolbarGroup>
				</p:toolbar>
				<p:treeTable size="small" id="id-types-list"
					value="#{modelManager.rootNode}" var="typeObject"
					selectionMode="single" selection="#{modelManager.selectedNode}">
					<p:column headerText="Type name">
						<h:outputText value="#{typeObject.name}" />
					</p:column>
					<p:ajax event="select" update="props-form:props-table" />
				</p:treeTable>

				<!-- Pop up menu -->
				<p:contextMenu for="id-types-list" widgetVar="tMenu"
					id="mcontext-group-form">
					<p:menuitem value="Create subtype"
						action="#{dlgCreateType.createTypeShow}"
						update=":growl-sticky"
						icon="pi pi-clone">
						<p:ajax event="dialogReturn" listener="#{modelManager.handleNewTypeReturn}" update=":growl-sticky, id-types-list" />
						</p:menuitem>
				</p:contextMenu>

			</h:form>
		</div>

		<!-- Properties table -->
		<div class="props-table">
			<h:form id="props-form">
				<p:toolbar>
					<p:toolbarGroup>
						<h3>Properties</h3>
					</p:toolbarGroup>
					<p:toolbarGroup align="right">
					<p:selectBooleanCheckbox value="#{modelManager.showInheritedProps}" itemLabel="Inherited" 
                       update="props-form:props-table">
                       <p:ajax update="props-form:props-table"/>
                    </p:selectBooleanCheckbox>
						<p:commandButton value="Create" icon="pi pi-plus"
							style="margin-right: .5rem" styleClass="ui-button-success"
                            action="#{dlgCreateType.createTypeShow}">
						</p:commandButton>
					</p:toolbarGroup>
				</p:toolbar>
				<p:dataTable size="small" id="props-table" var="property"
					value="#{modelManager.propertyList}">
					<p:column headerText="Name">
						<h:outputText value="#{property.name}" />
					</p:column>
					<p:column headerText="Type">
						<h:outputText value="#{property.type}" />
					</p:column>
					<p:column headerText="Is master">
						<h:outputText value="#{property.masterProperty}" />
					</p:column>
				</p:dataTable>
			</h:form>
		</div>
	</div>

	<!-- Error messages container -->
	<p:growl id="growl-sticky" for="sticky-key" showDetail="true"
		autoUpdate="true" />
</h:body>
</html>